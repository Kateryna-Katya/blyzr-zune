{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["// Глобальная переменная для математической капчи\nlet correctCaptchaAnswer = 0;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    // 0. Инициализация AOS\n    AOS.init({\n        duration: 800,\n        once: true, \n        easing: 'ease-in-out'\n    });\n\n    // 1. Инициализация иконок Lucide\n    lucide.createIcons();\n\n    // 2. Мобильное меню\n    const burger = document.querySelector('.header__burger');\n    const nav = document.querySelector('.nav');\n    const body = document.body;\n    const navLinks = document.querySelectorAll('.nav__link');\n\n    const toggleMenu = (isOpen) => {\n        nav.classList.toggle('active', isOpen);\n        body.classList.toggle('no-scroll', isOpen);\n        \n        const iconName = isOpen ? 'x' : 'menu';\n        burger.innerHTML = `<i data-lucide=\"${iconName}\"></i>`;\n        lucide.createIcons();\n    };\n\n    if (burger && nav) {\n        burger.addEventListener('click', () => {\n            const isOpen = !nav.classList.contains('active');\n            toggleMenu(isOpen);\n        });\n\n        navLinks.forEach(link => {\n            link.addEventListener('click', () => {\n                // Закрываем меню и разблокируем скролл\n                toggleMenu(false);\n            });\n        });\n    }\n\n    // 3. Эффект скролла для хедера\n    const header = document.querySelector('.header');\n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 20) {\n            header.style.background = 'rgba(3, 7, 18, 0.9)';\n            header.style.boxShadow = '0 4px 30px rgba(0,0,0,0.5)';\n        } else {\n            header.style.background = 'rgba(3, 7, 18, 0.7)';\n            header.style.boxShadow = 'none';\n        }\n    });\n\n    // 4. Hero Animation (Three.js - каркасная сфера)\n    const initHero3D = () => {\n        const container = document.getElementById('hero-canvas');\n        if (!container) return;\n\n        const scene = new THREE.Scene();\n        const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);\n        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n        \n        renderer.setSize(container.clientWidth, container.clientHeight);\n        renderer.setPixelRatio(window.devicePixelRatio);\n        container.appendChild(renderer.domElement);\n\n        const geometry = new THREE.IcosahedronGeometry(10, 2);\n        const material = new THREE.MeshBasicMaterial({ \n            color: 0x3B82F6, \n            wireframe: true,\n            transparent: true,\n            opacity: 0.3\n        });\n        \n        const sphere = new THREE.Mesh(geometry, material);\n        scene.add(sphere);\n\n        const innerGeo = new THREE.IcosahedronGeometry(6, 1);\n        const innerMat = new THREE.MeshBasicMaterial({\n            color: 0x8B5CF6, \n            wireframe: true,\n            transparent: true,\n            opacity: 0.5\n        });\n        const innerSphere = new THREE.Mesh(innerGeo, innerMat);\n        scene.add(innerSphere);\n\n        camera.position.z = 22;\n\n        const animate = () => {\n            requestAnimationFrame(animate);\n            \n            sphere.rotation.x += 0.001;\n            sphere.rotation.y += 0.002;\n            \n            innerSphere.rotation.x -= 0.002;\n            innerSphere.rotation.y -= 0.001;\n\n            sphere.position.y = Math.sin(Date.now() * 0.001) * 0.5;\n            innerSphere.position.y = Math.sin(Date.now() * 0.001) * 0.5;\n\n            renderer.render(scene, camera);\n        };\n        animate();\n\n        window.addEventListener('resize', () => {\n            camera.aspect = container.clientWidth / container.clientHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize(container.clientWidth, container.clientHeight);\n        });\n\n        // GSAP Text Animation (повторно, если вдруг не сработал ранее)\n        if (typeof gsap !== 'undefined') {\n            const tl = gsap.timeline({ defaults: { ease: \"power3.out\" } });\n            \n            tl.from(\".hero__badge\", { y: 20, opacity: 0, duration: 0.8, delay: 0.2 })\n              .from(\".hero__title\", { y: 30, opacity: 0, duration: 0.8 }, \"-=0.6\")\n              .from(\".hero__desc\", { y: 20, opacity: 0, duration: 0.8 }, \"-=0.6\")\n              .from(\".hero__actions\", { y: 20, opacity: 0, duration: 0.8 }, \"-=0.6\")\n              .from(\".hero__stats\", { opacity: 0, duration: 1 }, \"-=0.4\")\n              .from(\".hero__visual\", { scale: 0.8, opacity: 0, duration: 1.5, ease: \"elastic.out(1, 0.5)\" }, \"-=1.2\");\n        }\n    };\n    initHero3D();\n\n\n    // 5. FAQ Accordion Logic\n    const accordionHeaders = document.querySelectorAll('.accordion__header');\n    accordionHeaders.forEach(header => {\n        header.addEventListener('click', () => {\n            const item = header.parentElement;\n            const content = header.nextElementSibling;\n            \n            // Закрываем все остальные\n            accordionHeaders.forEach(otherHeader => {\n                const otherItem = otherHeader.parentElement;\n                const otherContent = otherHeader.nextElementSibling;\n                if (otherItem !== item && otherHeader.classList.contains('active')) {\n                    otherHeader.classList.remove('active');\n                    otherContent.style.maxHeight = null;\n                    otherContent.classList.remove('active');\n                }\n            });\n\n            // Открываем/закрываем текущий\n            header.classList.toggle('active');\n            content.classList.toggle('active');\n\n            if (content.style.maxHeight) {\n                content.style.maxHeight = null;\n            } else {\n                // Устанавливаем max-height равным высоте содержимого\n                content.style.maxHeight = content.scrollHeight + \"px\";\n            }\n        });\n    });\n\n\n    // 6. Contact Form Logic (Validation, Captcha, AJAX Simulation)\n    const form = document.getElementById('contact-form');\n    const formMessage = document.getElementById('form-message');\n    const phoneInput = document.getElementById('phone');\n\n    // Функция генерации капчи\n    const generateCaptcha = () => {\n        const num1 = Math.floor(Math.random() * 10) + 1;\n        const num2 = Math.floor(Math.random() * 10) + 1;\n        const operator = Math.random() > 0.5 ? '+' : '-';\n        \n        correctCaptchaAnswer = (operator === '+') ? num1 + num2 : num1 - num2;\n        document.getElementById('captcha-question').textContent = `${num1} ${operator} ${num2} = ?`;\n    };\n\n    // Генерируем капчу при загрузке страницы\n    if (form) generateCaptcha();\n\n    // Валидация\n    const validateField = (input, errorMessageElement, validationFunc, message) => {\n        const isValid = validationFunc(input.value);\n        if (!isValid) {\n            errorMessageElement.textContent = message;\n            input.classList.add('invalid');\n        } else {\n            errorMessageElement.textContent = '';\n            input.classList.remove('invalid');\n        }\n        return isValid;\n    };\n\n    const isPhoneNumberValid = (value) => {\n        // Проверяем, что содержит только цифры, '+' и пробелы, и имеет разумную длину\n        const phoneRegex = /^\\+?[\\d\\s]{7,20}$/;\n        // Дополнительно проверяем, что в нем хотя бы 5 цифр\n        const digitCount = (value.match(/\\d/g) || []).length;\n        return phoneRegex.test(value) && digitCount >= 5;\n    };\n\n    const validateForm = () => {\n        let isFormValid = true;\n\n        // Name\n        isFormValid = validateField(\n            document.getElementById('name'), \n            document.getElementById('name-error'), \n            (val) => val.trim().length > 2, \n            'Пожалуйста, введите ваше полное имя.'\n        ) && isFormValid;\n\n        // Email\n        isFormValid = validateField(\n            document.getElementById('email'), \n            document.getElementById('email-error'), \n            (val) => /\\S+@\\S+\\.\\S+/.test(val), \n            'Введите корректный Email адрес.'\n        ) && isFormValid;\n\n        // Phone (только цифры и +)\n        isFormValid = validateField(\n            document.getElementById('phone'), \n            document.getElementById('phone-error'), \n            isPhoneNumberValid, \n            'Введите корректный телефонный номер (только цифры и +).'\n        ) && isFormValid;\n\n        // Captcha\n        const captchaInput = document.getElementById('captcha');\n        isFormValid = validateField(\n            captchaInput, \n            document.getElementById('captcha-error'), \n            (val) => parseInt(val) === correctCaptchaAnswer, \n            'Неправильный ответ на математический пример.'\n        ) && isFormValid;\n        \n        // Agreement Checkbox\n        const agreementCheckbox = document.getElementById('agreement');\n        isFormValid = validateField(\n            agreementCheckbox, \n            document.getElementById('agreement-error'), \n            (val) => agreementCheckbox.checked, \n            'Необходимо дать согласие на обработку данных.'\n        ) && isFormValid;\n        \n        return isFormValid;\n    };\n\n    // Отправка формы (AJAX Simulation)\n    if (form) {\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n\n            if (validateForm()) {\n                // AJAX Simulation\n                form.style.pointerEvents = 'none'; // Блокируем форму\n                formMessage.classList.add('active');\n                formMessage.innerHTML = 'Отправка данных...';\n\n                setTimeout(() => {\n                    // Имитация успешной отправки\n                    formMessage.innerHTML = '<i data-lucide=\"check-circle\" style=\"width: 48px; height: 48px; margin-bottom: 15px;\"></i><p>Спасибо! Ваша заявка принята.</p><p style=\"font-size: 1rem;\">Мы свяжемся с вами в ближайшее время.</p>';\n                    lucide.createIcons();\n                    form.reset();\n                    generateCaptcha(); // Сброс капчи\n                    \n                    // Убираем сообщение через 4 секунды\n                    setTimeout(() => {\n                        formMessage.classList.remove('active');\n                        form.style.pointerEvents = 'auto';\n                    }, 4000);\n\n                }, 1500); // Задержка 1.5 сек для имитации загрузки\n            }\n        });\n    }\n\n    // 7. Cookie Consent Logic\n    const cookieConsent = document.getElementById('cookie-consent');\n    const acceptCookiesBtn = document.getElementById('accept-cookies');\n    const localStorageKey = 'blyzr-zune-cookies-accepted';\n\n    const checkCookieConsent = () => {\n        if (!localStorage.getItem(localStorageKey)) {\n            setTimeout(() => {\n                cookieConsent.classList.add('visible');\n            }, 1000); // Показываем через 1 секунду\n        }\n    };\n\n    const setCookieConsent = () => {\n        localStorage.setItem(localStorageKey, 'true');\n        cookieConsent.classList.remove('visible');\n    };\n\n    if (acceptCookiesBtn) {\n        acceptCookiesBtn.addEventListener('click', setCookieConsent);\n        checkCookieConsent();\n    }\n});"],"names":["correctCaptchaAnswer","burger","nav","body","navLinks","toggleMenu","isOpen","iconName","link","header","container","scene","camera","renderer","geometry","material","sphere","innerGeo","innerMat","innerSphere","animate","accordionHeaders","item","content","otherHeader","otherItem","otherContent","form","formMessage","generateCaptcha","num1","num2","operator","validateField","input","errorMessageElement","validationFunc","message","isValid","isPhoneNumberValid","value","phoneRegex","digitCount","validateForm","isFormValid","val","captchaInput","agreementCheckbox","cookieConsent","acceptCookiesBtn","localStorageKey","checkCookieConsent","setCookieConsent"],"mappings":"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"}